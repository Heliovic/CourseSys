**数据库设计：**

 

**1****逻辑设计**

（1）账户

account(username，password，tel，email，user_type)；

（2）课程

course(course_id，course_name，time，place，content，teach_id，ge_recommend，price，course_field，homework)；

（3）课程评价

coursecomment(course_id，publisher，content，score，picture_id)；

（4）教育机构

eduorg(username，org_code，org_address，org_contact，org_introduction，edu_field，edu_age，qualified)；

（5）新闻

news(news_id，publisher，time，title，content，course_id)；

（6）家长

parent(user_name，child_name，child_birthday，child_gender，parent_name，parent_contact，course_field，course_cost，course_place)；

（7）图片

pictures(picture_id)；

（8）试听

previewapp(parent_id，course_id，agreement)；

（9）购买

purchase(parent_id，course_id，purchased)；

（10）系统管理员

sysadmin(user_name，page_item_count)；

（11）教师评价

teachcomment(teach_id，publisher，content, score，picture_id，course_id)；

（12）教师

teacher(user_name，tea_name，tea_gender，tea_birthday，tea_id_number，tea_contact，tea_introduction，edu_field，edu_year，edu_age，qualified)；

（13）视频

video(video_id, time，video_url，publisher)；

 

**2****系统实现**
 （1）账户
 CREATE TABLE `account`  (

  `user_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `password` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `tel` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `email` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `user_type` enum('PARENT','EDUORG','TEACHER','SYSADMIN') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`user_name`) USING BTREE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（2）课程

CREATE TABLE `course`  (

  `course_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `course_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `time` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `place` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `content` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `teach_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `age_recommend` decimal(10, 0) NULL DEFAULT NULL,

  `price` decimal(10, 0) NULL DEFAULT NULL,

  `course_field` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `homework` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`course_id`) USING BTREE,

  INDEX `course_teacher_id`(`teach_id`) USING BTREE,

  CONSTRAINT `course_teacher_id` FOREIGN KEY (`teach_id`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（3）课程评价

CREATE TABLE `coursecomment`  (

  `course_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `publisher` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `content` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `score` decimal(10, 0) NULL DEFAULT NULL,

  `picture_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`course_id`, `publisher`) USING BTREE,

  INDEX `pcomment_publisher`(`publisher`) USING BTREE,

  INDEX `pcomment_picture_id`(`picture_id`) USING BTREE,

  CONSTRAINT `pcomment_course_id` FOREIGN KEY (`course_id`) REFERENCES `course` (`course_id`) ON DELETE CASCADE ON UPDATE CASCADE,

  CONSTRAINT `pcomment_picture_id` FOREIGN KEY (`picture_id`) REFERENCES `pictures` (`picture_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,

  CONSTRAINT `pcomment_publisher` FOREIGN KEY (`publisher`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（4）教育机构

CREATE TABLE `eduorg`  (

  `user_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `org_code` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `org_address` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `org_contact` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `org_introduction` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL,

  `edu_field` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `edu_age` decimal(10, 0) NULL DEFAULT NULL,

  `qualified` enum('YES','CHECK','NO') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  INDEX `user_name_eduorg`(`user_name`) USING BTREE,

  CONSTRAINT `user_name_eduorg` FOREIGN KEY (`user_name`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（5）新闻

CREATE TABLE `news`  (

  `news_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `publisher` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `time` datetime(0) NULL DEFAULT NULL,

  `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `content` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL,

  `course_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`news_id`) USING BTREE,

  INDEX `news_publisher`(`publisher`) USING BTREE,

  INDEX `news_course_id`(`course_id`) USING BTREE,

  CONSTRAINT `news_course_id` FOREIGN KEY (`course_id`) REFERENCES `course` (`course_id`) ON DELETE CASCADE ON UPDATE CASCADE,

  CONSTRAINT `news_publisher` FOREIGN KEY (`publisher`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（6）家长

CREATE TABLE `parent`  (

`user_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

`child_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `child_birthday` date NULL DEFAULT NULL,

  `child_gender` enum('MALE','FEMALE') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `parent_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `parent_contact` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `course_field` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `course_cost` decimal(10, 0) NULL DEFAULT NULL,

  `course_place` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`user_name`) USING BTREE,

  CONSTRAINT `user_name_parent` FOREIGN KEY (`user_name`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（7）图片

CREATE TABLE `pictures`  (

  `picture_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `pic_blob` mediumblob NULL,

  PRIMARY KEY (`picture_id`) USING BTREE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（8）试听

CREATE TABLE `previewapp`  (

  `parent_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `course_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `agreement` enum('YES','NO') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`parent_id`, `course_id`) USING BTREE,

  INDEX `preview_course_id`(`course_id`) USING BTREE,

  CONSTRAINT `preview_course_id` FOREIGN KEY (`course_id`) REFERENCES `course` (`course_id`) ON DELETE CASCADE ON UPDATE CASCADE,

  CONSTRAINT `preview_parent_id` FOREIGN KEY (`parent_id`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（9）购买

CREATE TABLE `purchase`  (

  `parent_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `course_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `purchased` enum('YES','NO') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`parent_id`, `course_id`) USING BTREE,

  INDEX `purchase_course_id`(`course_id`) USING BTREE,

  CONSTRAINT `purchase_course_id` FOREIGN KEY (`course_id`) REFERENCES `course` (`course_id`) ON DELETE CASCADE ON UPDATE CASCADE,

  CONSTRAINT `purchase_parent_id` FOREIGN KEY (`parent_id`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（10）系统管理员

CREATE TABLE `sysadmin`  (

  `user_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `page_item_count` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`user_name`) USING BTREE,

  CONSTRAINT `user_name_sysadmin` FOREIGN KEY (`user_name`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（11）教师评价

CREATE TABLE `teachcomment`  (

  `teach_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `publisher` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `content` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `score` decimal(10, 0) NULL DEFAULT NULL,

  `picture_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `course_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  PRIMARY KEY (`teach_id`, `publisher`, `course_id`) USING BTREE,

  INDEX `tcomment_publisher`(`publisher`) USING BTREE,

  INDEX `tcomment_picture_id`(`picture_id`) USING BTREE,

  INDEX `tcomment_course_id`(`course_id`) USING BTREE,

  CONSTRAINT `tcomment_picture_id` FOREIGN KEY (`picture_id`) REFERENCES `pictures` (`picture_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,

  CONSTRAINT `tcomment_publisher` FOREIGN KEY (`publisher`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE,

  CONSTRAINT `tcomment_teachid` FOREIGN KEY (`teach_id`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE,

  CONSTRAINT `tcomment_course_id` FOREIGN KEY (`course_id`) REFERENCES `course` (`course_id`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（12）教师

CREATE TABLE `teacher`  (

  `user_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

`tea_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `tea_gender` enum('MALE','FEMALE') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `tea_birthday` date NULL DEFAULT NULL,

  `tea_id_number` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `tea_contact` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `tea_introduction` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL,

  `edu_field` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `edu_year` decimal(10, 0) NULL DEFAULT NULL,

  `edu_age` decimal(10, 0) NULL DEFAULT NULL,

  `qualified` enum('YES','CHECK','NO') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`user_name`) USING BTREE,

  CONSTRAINT `user_name_teacher` FOREIGN KEY (`user_name`) REFERENCES `account` (`user_name`) ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

（13）视频
   CREATE TABLE `video`  (

  `video_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

  `time` datetime(0) NULL DEFAULT NULL,

  `video_url` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  `publisher` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,

  PRIMARY KEY (`video_id`) USING BTREE

) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;



**加Visio的图** 

 

 

 

 